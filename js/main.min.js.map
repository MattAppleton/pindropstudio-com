{"version":3,"sources":["main.js"],"names":["Shuffle","window","shuffle","Site","mobileThreshold","animationSpeed","swiperVariables","speed","pagination","paginationType","loop","nextButton","prevButton","init","_this","this","$","resize","onResize","document","ready","Galleries","fixWidows","bindPinScroll","Menu","Layout","Media","Lightbox","Luminaries","Expandables","Drawers","Share","each","string","html","replace","on","animate","scrollTop","$menuHamburger","$header","bind","toggleClass","shuffleInstances","length","index","item","$container","children","find","imagesLoaded","initShuffle","container","$section","remove","removeClass","itemSelector","sizer","throttleTime","staggerAmount","staggerAmountMax","addEventListener","update","undefined","i","$matchHeightGroups","matchHeights","group","targets","data","targetClass","maxHeight","$matchingItems","css","height","innerHeight","$galleries","hasClass","initHomeCarousel","initGalleryInstance","Swiper","$slides","background","background-image","autoplay","paginationClickable","paginationBulletRender","swiper","className","Archive","slideUp","slideDown","hide","show","click","toggle","$expandableId","slideToggle","$validationError","$submitConfirmation","openSubmitSection","About","$drawer","$target","x","closest","offset","top","toggleDrawer","clickedTrigger","target","addClass","location","href","split","handleAutoplay","parents","targetHeight","unloadActive","loadMedia","clearTimeout","scrollToTimeout","setTimeout","zenscroll","to","$active","$item","vimeo","loadVideo","soundcloud","loadAudio","vimeoId","insert","append","soundcloudUrl","makeURL","url","urlParts","encodeURIComponent","imageHeight","$lightbox","$lightboxInner","$lightboxTitle","$lightboxContent","setTitle","lightboxTitle","lightbox","openImage","openGallery","e","id","setImageHeights","outerHeight","title","lightboxImage","element","$gallery","siblings","clone","showGallery","gallery","first","slideTo","parent","$shareWidget"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, document, Site, imagesLoaded, Swiper, zenscroll */\nvar Shuffle = window.shuffle;\n\nSite = {\n  mobileThreshold: 601,\n  animationSpeed: 400,\n  swiperVariables: {\n    speed: 600,\n    pagination: '.swiper-pagination',\n    paginationType: 'fraction',\n    loop: true,\n    nextButton: '.swiper-button-next',\n    prevButton: '.swiper-button-prev',\n  },\n  init: function() {\n    var _this = this;\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    $(document).ready(function () {\n      Site.Galleries.init();\n    });\n\n    _this.fixWidows();\n    _this.bindPinScroll();\n\n    Site.Menu.init();\n    Site.Layout.init();\n    Site.Shuffle.init();\n    Site.Media.init();\n    Site.Lightbox.init();\n    Site.Luminaries.init();\n    Site.Expandables.init();\n    Site.Drawers.init();\n    Site.Share.init();\n  },\n\n  onResize: function() {\n    Site.Lightbox.onResize();\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n\n  bindPinScroll: function() {\n    $('#footer-pin-holder').on('click', function() {\n      $('html, body').animate({ scrollTop: 0 }, Site.animationSpeed);\n    });\n  }\n};\n\nSite.Menu = {\n  $menuHamburger: $('#menu-hamburger'),\n  $header: $('#header'),\n\n  init: function() {\n    this.bind();\n  },\n\n  bind: function() {\n    var _this = this;\n\n    _this.$menuHamburger.on('click', function() {\n      _this.$header.toggleClass('mobile-active');\n    });\n  }\n};\n\nSite.Shuffle = {\n  init: function() {\n    var _this = this;\n    _this.shuffleInstances = [];\n\n    if ($('.shuffle-section').length) {\n      _this.bind();\n    }\n\n  },\n\n  bind: function() {\n    var _this = this;\n\n    $('.shuffle-section').each(function(index, item) {\n      var $container = $(item).children('.shuffle-container');\n\n      if ($container.find('img').length) {\n        imagesLoaded($container[0], function() {\n          _this.initShuffle($container[0], $(item), index);\n        });\n      } else {\n        _this.initShuffle($container[0], $(item), index);\n      }\n    });\n\n  },\n\n  initShuffle: function(container, $section, index) {\n    var _this = this;\n\n    $section.children('.shuffle-preloader').remove();\n    $(container).removeClass('hidden');\n\n    _this.shuffleInstances[index] = new Shuffle(container, {\n      itemSelector: '.shuffle-item',\n      sizer: '.shuffle-item',\n      throttleTime: 200,\n      staggerAmount: 10,\n      staggerAmountMax: 150,\n    });\n\n    container.addEventListener('load', function() {\n      _this.update(index);\n    }, true);\n\n  },\n\n  update: function(index) {\n    var _this = this;\n\n    if (index !== undefined) {\n      // if update is called with an index variable just update that shuffle instance\n      if (_this.shuffleInstances[index]) {\n        _this.shuffleInstances[index].update();\n      }\n    } else {\n      // otherwise update all shuffle instances\n      if (_this.shuffleInstances.length > 0) {\n        for (var i = 0; i < _this.shuffleInstances.length; i++) {\n          _this.shuffleInstances[i].update();\n        }\n      }\n    }\n\n  }\n};\n\nSite.Layout = {\n  $matchHeightGroups: $('.js-match-height-group'),\n  init: function() {\n    var _this = this;\n\n    if (_this.$matchHeightGroups.length) {\n      _this.matchHeights();\n    }\n\n    _this.bind();\n\n  },\n\n  bind: function() {\n    var _this = this;\n\n    if (_this.$matchHeightGroups.length) {\n      $(window).resize(function() {\n        _this.matchHeights();\n      });\n    }\n\n  },\n\n  matchHeights: function() {\n    var _this = this;\n\n    _this.$matchHeightGroups.each(function(index, group) {\n      var targets = $(group).data('match-height-targets');\n\n      $(targets).each(function(index, targetClass) {\n        var maxHeight = 0;\n        var $matchingItems = $(group).find('.' + targetClass);\n\n        $matchingItems.css('height', 'auto');\n\n        $matchingItems.each(function(index, item) {\n          var height = $(item).innerHeight();\n\n          if (height > maxHeight) {\n            maxHeight = height;\n          }\n        });\n\n        $matchingItems.css('height', maxHeight + 'px');\n      });\n\n    });\n\n  },\n};\n\nSite.Galleries = {\n  init: function() {\n    var _this = this;\n    var $galleries = $('.swiper-container');\n\n    if ($galleries.length) {\n      $galleries.each(function(index, container) {\n        if ($(this).hasClass('home-carousel')) {\n          _this.initHomeCarousel(index, container);\n        } else {\n          _this.initGalleryInstance(index, container);\n        }\n      });\n    }\n  },\n\n  initGalleryInstance: function(index, container) {\n    var _this = this;\n\n    _this['gallery-instance' + index] = new Swiper(container, Site.swiperVariables);\n  },\n\n  initHomeCarousel: function(index, container) {\n    var _this = this;\n    var $slides = $(container).find('.swiper-slide');\n\n    $slides.each(function(index, item) {\n      var background = $(item).data('background');\n\n      $(item).css({\n        'background-image': 'url(' + background + ')'\n      });\n\n    });\n\n    _this['gallery-instance' + index] = new Swiper(container, {\n      speed: 1250,\n      autoplay: 3000,\n      pagination: '.swiper-pagination',\n      paginationType: 'bullets',\n      paginationClickable: true,\n      loop: true,\n      paginationBulletRender: function(swiper, index, className) {\n        return '<div class=\"carousel-pagination-item u-pointer ' + className + '\"><span class=\"carousel-pagination-item-number\">' + (index + 1) + '</span></div>';\n      },\n    });\n  }\n};\n\nSite.Luminaries = {\n  init: function() {\n    if ($('body').hasClass('post-type-archive-luminaries')) {\n      this.Archive.init();\n    } else if ($('body').hasClass('single-luminaries')) {\n\n    }\n  }\n};\n\nSite.Luminaries.Archive = {\n  init: function() {\n    this.bind();\n  },\n\n  bind: function() {\n    var _this = this;\n\n    $('#luminaries-sort-alphabetical').on('click', function() {\n\n      $('#posts-drawer').slideUp((Site.animationSpeed + 150), function() {\n        $('#alphabetical-drawer').slideDown(Site.animationSpeed);\n      });\n\n      $(this).hide();\n      $('#luminaries-sort-order').show();\n    });\n\n    $('#luminaries-sort-order').on('click', function() {\n\n      $('#alphabetical-drawer').slideUp((Site.animationSpeed + 150), function() {\n        $('#posts-drawer').slideDown(Site.animationSpeed);\n      });\n\n      $(this).hide();\n      $('#luminaries-sort-alphabetical').show();\n    });\n  },\n\n};\n\nSite.Expandables = {\n  init: function() {\n    var _this = this;\n\n    _this.bind();\n  },\n\n  bind: function() {\n    $('.expandable-toggle').click( function() {\n\n      $(this).toggle();\n\n      var $expandableId = $(this).data('exapandable-id');\n\n      // Toggle content\n      $('#' + $expandableId).slideToggle(Site.animationSpeed, function() {\n        if (Site.Shuffle.shuffleInstances) {\n          Site.Shuffle.update();\n        }\n      });\n    });\n  },\n\n};\n\nSite.Drawers = {\n  init: function() {\n    var _this = this;\n\n    _this.bind();\n\n    _this.$validationError = $('.gform_validation_error');\n    _this.$submitConfirmation = $('.gform_confirmation_message');\n\n    if (_this.$validationError.length) {\n      _this.openSubmitSection(_this.$validationError);\n    }\n\n    if (_this.$submitConfirmation.length) {\n      _this.openSubmitSection(_this.$submitConfirmation);\n    }\n\n    if ($('body').hasClass('page-about')) {\n      _this.About.init();\n    }\n  },\n\n  bind: function() {\n    $('.drawer-toggle').click( function() {\n      var $drawer = $(this).data('drawer-id');\n\n      // Toggle content\n      $('#' + $drawer).slideToggle(Site.animationSpeed);\n    });\n  },\n\n  openSubmitSection: function($target) {\n    for (var x = 0; x < $target.length; x++) {\n      $target.closest('.drawer-content').slideToggle(Site.animationSpeed, function() {\n        $('html, body').animate({\n          scrollTop: $(this).offset().top\n        }, Site.animationSpeed);\n      });\n    }\n  },\n};\n\nSite.Drawers.About = {\n  init: function() {\n    var _this = this;\n\n    _this.bind();\n  },\n\n  bind: function() {\n    var _this = this;\n\n    $('.about-page-drawer-trigger').on('click', function() {\n      _this.toggleDrawer(this);\n    });\n  },\n\n  toggleDrawer: function(clickedTrigger) {\n    var target = $(clickedTrigger).data('target');\n\n    if ($(clickedTrigger).hasClass('active')) {\n      return;\n    }\n\n    $('.about-page-drawer.active').slideUp((Site.animationSpeed + 150), function() {\n      $('#about-drawer-' + target).slideDown(Site.animationSpeed);\n\n      $('.about-page-drawer-trigger.active').removeClass('active');\n      $(clickedTrigger).addClass('active');\n\n      $('.about-page-drawer.active').removeClass('active');\n      $('#about-drawer-' + target).addClass('active');\n\n      if (target === 'people' && Site.Shuffle.shuffleInstances) {\n        Site.Shuffle.update();\n      }\n    });\n  }\n};\n\nSite.Media = {\n  init: function() {\n    var _this = this;\n\n    _this.bind();\n\n    if (window.location.href.split('?')[1] === 'autoplay') {\n      _this.handleAutoplay();\n    }\n  },\n\n  bind: function() {\n    var _this = this;\n\n    if ($('.media-items').length) {\n      $('.media-item-image-holder').on({\n        'click': function() {\n          var $target = $(this).parents('.media-item');\n          var targetHeight = $target.find('.media-item-image').height();\n\n          _this.unloadActive();\n\n          $target.addClass('active');\n\n          _this.loadMedia($target, targetHeight);\n\n          Site.Shuffle.update();\n\n          clearTimeout(_this.scrollToTimeout);\n          _this.scrollToTimeout = setTimeout(function() {\n            zenscroll.to($target[0]);\n          }, 200);\n        }\n      });\n\n      $('.media-stop-button').on({\n        'click': function() {\n          var $target = $(this).parents('.media-item');\n\n          _this.unloadActive();\n\n          Site.Shuffle.update();\n\n          clearTimeout(_this.scrollToTimeout);\n          _this.scrollToTimeout = setTimeout(function() {\n            zenscroll.to($target[0]);\n          }, 200);\n        }\n      });\n\n    }\n  },\n\n  unloadActive: function() {\n    var _this = this;\n    var $active = $('.media-item.active');\n\n    if ($active.hasClass('playing-video')) {\n      $('#media-item-video-embed').remove();\n      $active.removeClass('playing-video');\n    }\n\n    if ($active.hasClass('playing-audio')) {\n      $('#media-item-audio-embed').remove();\n      $active.removeClass('playing-audio');\n    }\n\n    $active.removeClass('active');\n  },\n\n  loadMedia: function($item, targetHeight) {\n    var _this = this;\n    var data = $item.data();\n\n    if (data.vimeo) {\n      _this.loadVideo($item, data.vimeo);\n    } else if (data.soundcloud) {\n      _this.loadAudio($item, data.soundcloud, targetHeight);\n    }\n  },\n\n  loadVideo: function($item, vimeoId) {\n    var _this = this;\n    var insert = '<div id=\"media-item-video-embed\" class=\"u-video-embed-container\"><iframe src=\"https://player.vimeo.com/video/' + vimeoId + '?title=0&byline=0&portrait=0&autoplay=1\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>';\n\n    $item.addClass('playing-video');\n    $item.find('.media-item-image-holder').append(insert);\n  },\n\n  loadAudio: function($item, soundcloudUrl, targetHeight) {\n    var _this = this;\n\n    soundcloudUrl = _this.makeURL(soundcloudUrl);\n\n    var insert = '<div id=\"media-item-audio-embed\" style=\"height: ' + targetHeight + 'px;\"><iframe width=\"100%\" height=\"' + targetHeight + '\" scrolling=\"no\" frameborder=\"no\" src=\"https://w.soundcloud.com/player/?url=' + soundcloudUrl + '&amp;auto_play=true&amp;hide_related=true&amp;show_comments=false&amp;show_user=false&amp;show_reposts=false&amp;visual=true\"></iframe></div>';\n\n    $item.addClass('playing-audio');\n    $item.find('.media-item-image-holder').append(insert);\n  },\n\n  handleAutoplay: function() {\n\n    if ($('#s-and-v-video').length) {\n      window.setTimeout(function() {\n        zenscroll.to($('#s-and-v-video')[0]);\n      }, Site.animationSpeed);\n    } else if ($('#s-and-v-audio').length) {\n      window.setTimeout(function() {\n        zenscroll.to($('#s-and-v-audio')[0]);\n      }, Site.animationSpeed);\n    }\n\n  },\n\n  makeURL: function(url) {\n    var urlParts = url.split('/');\n\n    // Check if url comes with token\n    if (urlParts.length === 6) {\n\n      // Replace token in path as a query param\n      url = url.replace(urlParts[5],'?secret_token=' + urlParts[5]);\n    }\n\n    return encodeURIComponent(url);\n  },\n};\n\nSite.Lightbox = {\n  imageHeight: 300,\n\n  init: function() {\n    var _this = this;\n\n    _this.$lightbox = $('#lightbox');\n    _this.$lightboxInner = $('#lightbox-inner');\n    _this.$lightboxTitle = $('#lightbox-title');\n    _this.$lightboxContent = $('#lightbox-content');\n\n    _this.bind();\n  },\n\n  bind: function() {\n    var _this = this;\n\n    $('[data-lightbox]').on({\n      'click': function() {\n        var data = $(this).data();\n\n        _this.setTitle(data.lightboxTitle);\n\n        if (data.lightbox === 'image') {\n          _this.openImage(data);\n        } else if (data.lightbox === 'gallery') {\n          _this.openGallery(this);\n        }\n\n      }\n    });\n\n    _this.$lightbox.on({\n      'click': function(e) {\n        if (e.target.id === 'lightbox' || e.target.id === 'lightbox-close') {\n          _this.hide();\n        }\n      }\n    });\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    _this.setImageHeights();\n  },\n\n  setImageHeights: function() {\n    var _this = this;\n\n    $('.attachment-lightbox, .lightbox-image').css('max-height', '100%');\n\n    _this.imageHeight = _this.$lightboxInner.height() - _this.$lightboxTitle.outerHeight(true);\n\n    if ($('#lightbox-content .swiper-pagination').length) {\n      _this.imageHeight = _this.imageHeight - $('#lightbox-content .swiper-pagination').outerHeight(true);\n    }\n\n    $('.attachment-lightbox, .lightbox-image').css('max-height', _this.imageHeight + 'px');\n  },\n\n  show: function() {\n    var _this = this;\n\n    $('body').addClass('lightbox-active');\n    _this.$lightbox.css('display', 'flex');\n\n  },\n\n  hide: function() {\n    var _this = this;\n\n    _this.$lightbox.hide();\n    $('body').removeClass('lightbox-active');\n    _this.$lightboxTitle.html('');\n    _this.$lightboxContent.html('');\n  },\n\n  setTitle: function(title) {\n    var _this = this;\n\n    _this.$lightboxTitle.html(title);\n  },\n\n  openImage: function(data) {\n    var _this = this;\n    var insert = '<img class=\"lightbox-image\" src=\"' + data.lightboxImage + '\" />';\n\n    _this.$lightboxContent.append(insert);\n\n    _this.show();\n\n    _this.setImageHeights();\n  },\n\n  openGallery: function(element) {\n    var _this = this;\n    var $gallery = $(element).siblings('.gallery').clone();\n\n    $gallery.addClass('swiper-container').removeClass('u-hidden');\n\n    _this.$lightboxContent.append($gallery);\n\n    _this.showGallery($gallery);\n  },\n\n  showGallery: function(gallery) {\n    var _this = this;\n\n    _this.show();\n\n    _this.gallery = new Swiper(gallery, Site.swiperVariables);\n\n    $('#lightbox-content .attachment-lightbox').first().on('load', function() {\n      _this.setImageHeights();\n      _this.gallery.slideTo(0);\n    });\n\n  },\n};\n\nSite.Share = {\n  init: function() {\n    var _this = this;\n\n    if ($('.share-widget').length) {\n      _this.bind();\n    }\n  },\n\n  bind: function() {\n    var _this = this;\n\n    $('.share-trigger').on({\n      'click': function() {\n        var $target = $(this).parent();\n\n        _this.toggle($target);\n      }\n    });\n  },\n\n  toggle: function($shareWidget) {\n    var _this = this;\n\n    if ($shareWidget.data('open')) {\n      $shareWidget.find('.share-trigger').show();\n      $shareWidget.find('.share-list').hide();\n      $shareWidget.data('open', false);\n    } else {\n      $shareWidget.find('.share-trigger').hide();\n      $shareWidget.find('.share-list').css('display', 'flex');\n\n    }\n  }\n};\n\nSite.init();\n"]}